<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{{ page.title }}</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css"
    />
    <style>
      body {
        margin: 0;
        padding: 1rem;
        padding-bottom: 4rem;
        box-sizing: border-box;
      }
      #bottom-bar {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.9);
        border-top: 1px solid #ccc;
        font-family: sans-serif;
        font-size: 1.2rem;
      }
      #bottom-bar input[type="search"] {
        flex: 1;
        padding: 0.5rem;
      }
      #search-results {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 4rem;
        max-height: 40vh;
        overflow-y: auto;
        background: #fff;
        border-top: 1px solid #ccc;
        display: none;
        padding: 0.5rem;
        font-family: sans-serif;
      }
      #search-results ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      #search-results li {
        margin: 0.25rem 0;
      }
      #search-results a {
        text-decoration: none;
      }
      .collapsible {
        cursor: pointer;
      }
      .collapsible::before {
        content: "\25BE";
        display: inline-block;
        margin-right: 0.25em;
        font-size: 0.8em;
      }
      .collapsible.collapsed::before {
        content: "\25B8";
      }
    </style>
  </head>
  <body>
    <textarea id="markdown-src" style="display: none">
{{ page.content | escape }}</textarea
    >
    <article id="content" class="markdown-body"></article>
    <div id="bottom-bar">
      <button id="back-button" title="Back">&#8592;</button>
      <a id="home-button" title="Home" href="{{ '/' | relative_url }}"
        >&#8962;</a
      >
      <input type="search" id="search-input" placeholder="Search..." />
    </div>
    <div id="search-results"></div>
    <script>
      (async () => {
        const src = document.getElementById("markdown-src");
        const content = document.getElementById("content");
        const md = src.value;
        try {
          const resp = await fetch("https://api.github.com/markdown", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/vnd.github+json",
            },
            body: JSON.stringify({ text: md }),
          });
          const html = await resp.text();
          content.innerHTML = html;
        } catch (e) {
          content.textContent = md;
        }
      })();
    </script>
    <script src="{{ '/menu.js' | relative_url }}"></script>
    <script src="{{ '/site.js' | relative_url }}"></script>
  </body>
</html>
